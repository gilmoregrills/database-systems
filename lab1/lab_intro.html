<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"></head>
<body><h1> Lab 1: Oracle environment and using SQL </h1>

The aim of this lab session is to introduce you to the Oracle Database 
environment and to get you started working through the SQL exercises.

<h2>Task 1: logging into Oracle </h2>

Firstly, you need to connect to Bert using SSH in the usual
way, i.e. by typing from the command prompt:
<p><code>ssh bert</code></p>

You are now going to create for yourself a new Oracle account and 
connect to the SQLPLUS subsystem of Oracle. SQLPLUS is the part of
Oracle from which you can issue SQL statements to create, modify and 
remove database objects such as tables, views, triggers etc. as well as 
querying and manipulating data.
<br>
Firstly, to create a new Oracle account for yourself, See the following web page 
<br>
<br>
 <a href="https://webprojects.eecs.qmul.ac.uk/info/details.php">https://webprojects.eecs.qmul.ac.uk/info/details.php</a>
<br>
<br>
Having created an Oracle account, you can connect to it using sqlplus 
from Bert. To connect to the new data base on bert you need to change 
the values of some environment variables before using PL/SQL. To do 
this, use the command 
<p><code>neworacle</code></p>
on bert before running SQLPLUS (only for the first use).
<br>
To start SQLPLUS use the command
<p><code>sqlplus ${USER}@calvin</code></p>

and type in the password you were shown on the above web page.

On entering your Oracle password, you will be taken to the SQL prompt, which looks like
<br>
<br>
sql&gt;
<br>
<br>
From that point you can issue SQL statements to Oracle.
<br>
You may wish to change your password to something that is secure but is 
easier to remember. Bare in mind while doing this that your password 
will be visible when you type it on the screen when issuing the 
following command. To change your password, type from the SQL prompt:
<p><code>password</code><br>
<br>
Make sure you remember your new password, and enter it correctly, as 
there is no easy way you can retrieve this once logged out of Oracle.
 

<h2>Task 2: setting up and verifying the tables for the labs </h2> 

Note on the difference between SQL and SQLPLUS commands. SQL is the 
worldwide standard language used for accessing Relational Database 
Systems. It works almost unchanged on all major Relational systems, such
 as IBM's DB2, Oracle, Mysql, Sybase, Postgresql, Informix, Microsoft's 
SQL Server and Access database systems, which is why we teach the SQL 
language on your degree program. To use SQL in the Oracle environment, 
some additional Oracle specific commands are required. These are mainly 
used for manipulating files and formatting output from queries and 
reports. We refer to these Oracle specific commands as SQLPLUS commands,
 to distinguish them from standard SQL statements.

You are going to create the tables for the labs by executing a file that
 resides in my account. The file contains a mixture of standard SQL 
statements plus a number of SQLPLUS commands. The SQLPLUS commands in 
the file are used to control how much output is written to the screen 
and format output from SQL statements. The SQL statements themselves 
create the tables in the usual
way.

The SQLPLUS command used to run a file of SQLPLUS commands is <code>start</code>. 
If you have a file that
contains pure SQL statements only in your current directory you can run 
it simply by typing 

@filename

from the SQL prompt.

If you want to check the contents of your current directory, or run any 
other Linus command
from the SQL prompt, simply start the command with the keyword <code>host</code>.

For example:
<p><code>host ls</code></p>
From the SQL prompt will list the contents of your current directory.

To run the file of SQLPLUS commands to create the lab tables, first download the file
labtables.sql from QMPlus and save it in your home folder, then type:
<p><code>start labtables.sql</code></p>

You should see a couple of messages, the last of which confirms the tables have been created.

This creates five tables in your account, called emp, dept, bonus, salgrade and dummy.

<h2>Task 3: using SQL statements to check the tables </h2>

A lecture on SQL will be given in week 4 of the module. Meanwhile, a 
good basic introduction to the language which you can use to assist with
 the lab exercises can be found <a href="http://www.firstsql.com/tutor.htm">here</a>
  

SQL statements are entered from the SQL prompt in SQLPLUS by simply 
typing the statement. Each time you press the "return" or "enter" key, 
Oracle will prompt with a new line number. When you reach the end of the
 statement, put a semi-colon (;) and
hit the enter key. This tells Oracle that is the end of this statement 
and that it should be executed immediately.

Using simple <code>SELECT</code> statements, inspect the contents of each of the 
tables and verify
they have been created in your account. 

Here is a brief explanation of some of the less obvious columns in the 
tables:

<br>
In table emp, mgr holds the empno of that employee's manager
<br>
In table emp, comm holds the commision earned by that employee
<br>
<br>
In table dept, loc holds the location of that department

You may notice that the results for some queries wraps round onto a 
second line. In general we use Oracle specific SQLPLUS commands to 
format output from queries. This will be useful for example in 
formatting the output from queries you develop as part of your second 
coursework. A useful document on SQLPLUS commands for formatting query 
output can be found on QMPlus (sqlplus.rtf).

<br>

<h2>Task 4: Look at the structure of the tables using the SQLPLUS describe command </h2>

So far you have examined the data in the tables, but suppose you wish to check the type,
format and length of the attributes in each table. This is done with the describe
command. For each of the tables, from the SQL prompt, type:
<p><code>describe "tablename"</code></p>
<br>
And check the details of the attributes of each table. 

Describe is an Oracle specific SQLPLUS command, it is very useful in enabling the viewing of table attributes and constraints.

<h2>Task 5: editing and saving SQL statements and spooling output </h2>

When you type SQL statements from the SQL prompt, you are typing into the SQL buffer. If
you start typing a new SQL statement, and press return, the old contents of the
buffer will be removed and replaced by your new statement.

If you have created an SQL statement you wish to save, simply type:
<p><code>save "filename"</code></p>
<br>
from the SQL prompt.

This saves the file to the current Linux directory.

If you don't give the file an extension, it defaults to .sql.

Similarly, to retrieve a file containing an SQL statement or script, simply type:
<p><code>get "filename"</code></p>
<br>
from the SQL prompt. This will fetch the file into the SQL buffer. If you wish then to run it, simply type 
<p><code>r</code></p>
<br>
from the SQL prompt.

<h3> Capturing screen output </h3>

If you want to capture the details of what you type, and the output from the screen, (for
example the results of a query), use the spool command. For example, to capture
the details of an SQL statement and the results it returns, simply type
<p><code>spool "filename"</code></p>
<br>
from the SQL prompt.

Then type the statement, with a semi-colon at the end to make it run 
immediately, the
SQL statement and the  results will be displayed on the screen and also 
written to the file you specified in the spool command. When you are 
finished, make sure you remember to turn spooling off, by typing 
<p><code>spool off</code></p>

Otherwise input and output will continue to be written to the file, which will steadily
grow in size, consuming your available disk quota.

<h2>Task 6: starting SQL</h2>

Go on QMPlus and download the first SQL exercise (simple queries).
Overall, there are 7 exercises you should use to build up your knowledge of the 
SQL language. This will help you considerably in the coursework and in 
understanding examples used on the course. 
You can also find some useful notes on SQL in Oracle (sqlnotes.doc)

</body></html>